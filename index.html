<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="faviconimg.jpeg" type="image/gif" sizes="16x16">
  <meta charset="UTF-8">
  <title>Cine Arena JIO HOTSTAR</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://content.jwplatform.com/libraries/SAHhwvZq.js"></script>

  <!-- Anti-Debugging Script -->
  <script>
    document.addEventListener("keydown", function(e) {
      if (
        e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) ||
        (e.ctrlKey && e.key === "U")
      ) {
        e.preventDefault();
      }
    });

    (function() {
      const detect = new Image();
      Object.defineProperty(detect, 'id', {
        get: function () {
          document.body.innerHTML = 'Dont Cheat Otherwise I will Fuck You!';
          throw new Error("DevTools detected");
        }
      });
      setInterval(() => console.dir(detect), 1000);
    })();
  </script>

  <!-- User Prompt Script -->
  <script>
    if (confirm("Join Our Telegram Channel To Watch Live Match")) {
        window.location.href = "https://t.me/IPTV_INDIA_3";
    }
  </script>

  <style>
    body {
      margin: 0px;
    }

    .jwplayer {
      position: absolute !important;
    }

    .jwplayer.jw-flag-aspect-mode {
      min-height: 100%;
      max-height: 100%;
    }
  </style>
</head>
<body>
  <div id="player"></div>

  <script>
    // Base64 Encoded Default Stream URL
    const encodedUrl = "https%3A%2F%2Fdai.fancode.com%2Fprimary%2F123522_english_hls_60901ta-di_h264%2Findex.m3u8";
    
    // Decode the Base64-encoded URL, or use the 'file' query parameter if available
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    const streamUrl = getQueryParam("file") || atob(encodedUrl);

    if (streamUrl && streamUrl.startsWith("http")) {
      jwplayer.key = 'XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo'; // JWPlayer Key

      // Patch XHR to inject token into segments
      (function() {
        const origOpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function(method, url) {
          if (url && !url.includes("__hdnea__")) {
            url += (url.includes('?') ? '&' : '?') + "__hdnea__=st=1758369634~exp=1758456034~acl=/*~hmac=a4c102e78416b45f007f0e41df2c3a5097948e8fe03e0d6c33d618a6569f71d0";
          }
          return origOpen.apply(this, arguments);
        };
      })();

      jwplayer("player").setup({
        playlist: [{
          file: streamUrl,  // Decoded or query param stream URL
          drm: {
            clearkey: {
              keyId: "400131994b445d8c8817202248760fda",
              key: "2d56cb6f07a75b9aff165d534ae2bfc4",
              robustness: {
                video: "SW_SECURE_DECODE",
                audio: "SW_SECURE_DECODE"
              }
            }
          }
        }],
        width: "100%",
        height: "100%",
        autostart: true,
        mute: false,
        primary: "html5",
        hlshtml: true,
        aspectratio: "16:9",
        stretching: "exactfit",
        playbackRateControls: true,
        controls: true,
        skin: { name: "default", active: "red", inactive: "white", background: "black" },
      }).on("error", e => {
        console.error("Player error:", e);
        const msg = document.createElement('div');
        msg.id = "message";
        msg.innerText = "Player error: " + (e.message || "Unknown error");
        document.body.appendChild(msg);
      });

    } else {
      document.body.innerHTML = "Invalid stream URL.";
    }
  </script>
</body>
</html>
